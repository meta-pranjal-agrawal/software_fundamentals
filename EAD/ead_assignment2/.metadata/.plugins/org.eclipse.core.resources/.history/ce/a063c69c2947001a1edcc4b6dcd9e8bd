
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.*;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.mysql.jdbc.ResultSet;
import com.mysql.jdbc.Statement;

/**
 * Servlet implementation class ShowStudent
 */
@WebServlet("/ShowStudent")
public class ShowStudent extends HttpServlet {
	private static final long serialVersionUID = 1L;

	protected void doGet(HttpServletRequest request,
			HttpServletResponse response) throws ServletException, IOException {
		try {
			
			Connection con = ConnectionUtility.getConnection();
			Statement stmt = (Statement) con.createStatement();
			String query = "Select * from students";

			ResultSet rs = (ResultSet) stmt.executeQuery(query);
			PrintWriter out = response.getWriter();
			
			out.println("<html><body><table border=1 width=50% height=50%>");  
	        out.println("<tr><th>First Name</th><th>Last Name</th><th>Father's Name</th><th>Email</th><th>Class</th><th>Age</th><th>Update</th><tr>");  
	        while (rs.next())
	         {  
	               
	               String firstName = rs.getString("First_Name");
	               String lastName = rs.getString("Last_Name");
	               String email = rs.getString("E-Mail");
	               String fatherName = rs.getString("Fathers_Name");
	               int classNumber = Integer.parseInt(rs.getString("Class"));
	               int age = Integer.parseInt(rs.getString("Age"));  
	               out.println("<tr><td>" + firstName + "</td><td>" + lastName + "</td><td>" + fatherName +"</td><td>" + email +"</td><td>" + classNumber+"</td><td>" + age +"</td><td>"
	               		+ "<form method=get action=ShowStudent><input type=submit value=Show Students></form></td></tr>");  
	          }  
	           out.println("</table></body></html>"); 
			
			
	

		}
		catch (Exception e) 
		{

		}

	}

}
